!function(t){"use strict";t.fn.findItFast=function(e){var n,a={itemList:"findItFast-list",inputClass:"findItFast-input",cancelClass:"findItFast-clear",formClass:"findItFast-form"},i=13,s=38,o=40,l=27,r=9,c={dataConfig:{type:"json",src:null,key:null,href:null,maxItems:null,timer:500},initClass:"findItFast-js",templates:{form:{method:"get",action:"",name:"",label:"Search",hideLabelText:!1,placeholder:"",inputName:"q",inputClass:"",clearSearchHtml:"X",clearSearchAriaText:"Clear search",submitType:"text",submitHtml:"Submit",submitAriaText:"Submit"},listItems:{type:"json",includeLinks:!1,className:"findItFast-item"}},ariaConfig:{srHiddenClass:"sr-only",includeLiveRegion:!1,liveMsg:{none:"No suggestions found.",one:"One suggestion found. Use up and down keys to navigate.",multiple:"Multiple suggestions found. Use up and down keys to navigate."}},eventConfig:{input:{onObjClick:function(t,e){},onObjFocus:function(t,e){I.closeAllAutocompletes();var n=e.find("."+a.itemList);n.length>0&&n.fadeIn("fast")},onObjBlur:function(t,e){},onObjKeydown:function(t,e){switch(t.which){case r:case l:return I.cancel(e);case s:case o:return I.changeSelection(e,t.which===s?-1:1);case i:return I.cancel(e);default:p(function(){"url"===d.dataConfig.type?b.getData.url(t.target.value,e):v.generateListContainer(b.processList(t.target.value,e),e)},d.dataConfig.timer)}}},cancel:{onObjClick:function(t,e){I.cancel(e),v.clearListItems(e)},onObjFocus:function(t,e){I.cancel(e)},onObjBlur:function(t,e){},onObjKeydown:function(t,e){}},listItems:{onObjClick:function(t,e){d.templates.listItems.includeLinks||(I.populateValue(t,e),I.cancel(e))},onObjFocus:function(t,e){I.populateValue(t,e)},onObjBlur:function(t,e){},onObjKeydown:function(e,n){var c=n.find("."+a.inputClass);switch(e.which){case l:return c.focus(),I.cancel(n);case s:case o:return I.changeSelection(n,e.which===s?-1:1);case i:if(!d.templates.listItems.includeLinks)return c.focus(),t(this).click(),I.cancel(n);t(this)[0].click();case r:e.preventDefault(),c.next().focus();default:return!1}}},form:{onObjSubmit:function(t,e){t.preventDefault()}}}},f="",u="Missing arguments",m="Failed to load response",d=t.extend(!0,{},c,e),p=(n=0,function(t,e){clearTimeout(n),n=setTimeout(t,e)});String.format||(String.format=function(t){var e=Array.prototype.slice.call(arguments,1);return t.replace(/{(\d+)}/g,function(t,n){return void 0!==e[n]?e[n]:t})});var g,C={form:{default:function(e,n){var i=t("<form></form>",{name:d.templates.form.name+"-"+n,id:d.templates.form.name+"-"+n,class:a.formClass,action:d.templates.form.action,method:d.templates.form.method});t("<label></label>",{for:d.templates.form.inputName+"-"+n,html:d.templates.form.label,class:d.templates.form.hideLabelText?d.ariaConfig.srHiddenClass:""}).appendTo(i);var s=t("<span></span>",{class:"findItFast-input-span"}).appendTo(i),o=t("<input />",{type:"search",id:d.templates.form.inputName+"-"+n,name:d.templates.form.inputName,class:a.inputClass,role:"combobox",autocomplete:"off","aria-autocomplete":"list","aria-owns":"ul-"+a.itemList+"-"+n,"aria-expanded":!1,"aria-activedescendant":"false",placeholder:d.templates.form.placeholder});""!==d.templates.form.inputClass&&o.addClass(d.templates.form.inputClass),o.appendTo(s);var l=t("<button></button>",{type:"reset",class:a.cancelClass,html:d.templates.form.clearSearchHtml}).appendTo(s);t("<span></span>",{class:d.ariaConfig.srHiddenClass,html:d.templates.form.clearSearchAriaText}).appendTo(l),t("<button></button>",{type:"submit",html:d.templates.form.submitHtml+("icon"===d.templates.form.submitType?'<span class="'+d.ariaConfig.srHiddenClass+'">'+d.templates.form.submitAriaText+"</span>":"")}).appendTo(i);var r=t("<div></div>",{id:a.itemList+"-"+n,class:a.itemList}).appendTo(i);return t("<ul></ul>",{id:"ul-"+a.itemList+"-"+n,role:"listbox"}).appendTo(r),i}},listItems:{type:{list:function(){return'<li id="'+d.templates.listItems.className+'{1}" class="'+d.templates.listItems.className+'" role="option" aria-selected="false" tabindex="0">{0}</li>'},links:function(){return'<li class="link-based"><a href="{2}" id="'+d.templates.listItems.className+'{1}" class="'+d.templates.listItems.className+'" role="option" aria-selected="false">{0}</a></li>'}},processArray:function(e,n){for(var a=[],i=0;i<e.length;i++){var s=t(String.format(C.listItems.type.list(),e[i],i));a.push(s)}return a},processJson:function(e,n){var a=[];return t.each(e,function(e,n){var i;i=d.templates.listItems.includeLinks?t(String.format(C.listItems.type.links(),n[d.dataConfig.key],e,n[d.dataConfig.href])):t(String.format(C.listItems.type.list(),n[d.dataConfig.key],e)),a.push(i)}),a}}},v={generateForm:function(t,e){return C.form.default(t,e)},generateList:function(t,e){var n=e.find("."+a.itemList+" ul");if(0===t.length)n.append("<li>"+d.ariaConfig.liveMsg.none+"</li>");else switch(d.templates.listItems.type){case"json":n.append(C.listItems.processJson(t,e));break;case"array":n.append(C.listItems.processArray(t,e));break;default:return[]}return n},generateListContainer:function(t,e){v.clearListItems(e);var n=e.find("."+a.itemList);n.hide(),void 0!==t&&(h.updateRegion(t),n.append(v.generateList(t,e)),n.fadeIn("fast"))},clearListItems:function(t){t.find("."+a.itemList).find("li").remove()},attachEvents:{form:function(t){t.find("form").on("submit",function(t,e){d.eventConfig.form.onObjSubmit(t,e)}).on("focus",function(t,e){d.eventConfig.form.onObjFocus(t,e)}).on("blur",function(t,e){d.eventConfig.form.onObjBlur(t,e)})},input:function(t){t.find("."+a.inputClass).on("keydown",function(e){d.eventConfig.input.onObjKeydown(e,t)}).on("focus",function(e){d.eventConfig.input.onObjFocus(e,t)}).on("blur",function(e){d.eventConfig.input.onObjBlur(e,t)}).on("click",function(e){d.eventConfig.input.onObjClick(e,t)})},cancel:function(t){t.find("."+a.cancelClass).on("click",function(e){d.eventConfig.cancel.onObjClick(e,t)}).on("focus",function(e){d.eventConfig.cancel.onObjFocus(e,t)}).on("blur",function(e){d.eventConfig.cancel.onObjBlur(e,t)}).on("keydown",function(e){d.eventConfig.cancel.onObjKeydown(e,t)})},listItems:function(t,e){var n="."+e;t.on("click",n,function(e){d.eventConfig.listItems.onObjClick(e,t)}).on("focus",n,function(e){d.eventConfig.listItems.onObjFocus(e,t)}).on("blur",n,function(e){d.eventConfig.listItems.onObjBlur(e,t)}).on("keydown",n,function(e){d.eventConfig.listItems.onObjKeydown(e,t)})}}},b={getData:{json:function(t){if(""!==t){var e=d.dataConfig.src,n=d.dataConfig.key;return e.filter(function(e){return e[n].toLowerCase().indexOf(t.toLowerCase())>-1})}},array:function(t){if(""!==t)return d.dataConfig.src.filter(function(e){return e.toLowerCase().indexOf(t.toLowerCase())>-1})},url:function(e,n){var a=n.find("form");t.ajax({url:d.dataConfig.src,data:a.serialize(),dataType:"json",type:"get"}).done(function(t){v.generateListContainer(t,n)}).fail(function(){console.log(m)}).always(function(){})}},processList:function(t,e){if(t.length&&d.dataConfig.src){var n;switch(d.dataConfig.type){case"array":n=b.getData.array(t,e);break;case"json":n=b.getData.json(t,e);break;default:n=[]}return void 0!==n&&null!==d.dataConfig.maxItems&&d.dataConfig.maxItems>0&&n.slice(0,d.dataConfig.maxItems),console.log(n),n}console.log(u)}},h={createRegion:function(){d.ariaConfig.includeLiveRegion&&0===t("#findItFast-live-region").length&&t("<div></div>",{id:"findItFast-live-region","aria-live":"polite",class:d.ariaConfig.srHiddenClass,html:"<span></span>"}).prependTo("body")},updateRegion:function(e){var n=t("body").find("#findItFast-live-region span");if(void 0!==n)switch(n.text(""),e.length){case 0:n.text(d.ariaConfig.liveMsg.none);break;case 1:n.text(d.ariaConfig.liveMsg.one);break;default:n.text(d.ariaConfig.liveMsg.multiple)}}},I={cancel:function(t){var e=t.find("."+a.itemList),n=t.find("."+a.inputClass);e.fadeOut(),n.attr({"aria-expanded":"false"})},changeSelection:function(e,n){var i=e.find("."+a.itemList);if(i.length){var s=i.find(".current"),o=i.find("ul li"),l=e.find("."+a.inputClass);if(d.templates.listItems.includeLinks&&(o=o.find("a")),t(o).attr("aria-selected",!1),l.attr("aria-activedescendant",""),0===s.length){var r=o.first();t(r).addClass("current").attr("aria-selected",!0).focus(),l.attr("aria-activedescendant",r.attr("id"))}else if(o.removeClass("current"),-1===n&&o.index(s)+1===1)l.focus();else if(1===n&&o.index(s)+1===o.length)o.first().focus();else{var c=o.eq(o.index(s)+n);t(c).addClass("current").attr("aria-selected",!0).focus(),l.attr("aria-activedescendant",c.attr("id"))}}},populateValue:function(e,n){var i=t(e.target);t(n).find("."+a.inputClass).val(i.text())},closeAllAutocompletes:function(){t(".findItFast-list").fadeOut("fast")}};return g=this,h.createRegion(),t("html").addClass(d.initClass),t("."+d.initClass).on("click",function(e){var n=t(e.target);n.hasClass(a.itemList)||n.parents().hasClass(a.itemList)||n.is('[id*="'+d.templates.form.inputName+'"]')||n.parents().is('[id*="'+d.templates.form.inputName+'"]')||t("."+a.itemList).fadeOut()}),g.each(function(e,n){var a=t(n),i="";f===d.templates.form.name?i=e:(i=d.templates.form.name,f=d.templates.form.name),a.append(v.generateForm(a,i)),v.attachEvents.listItems(a,d.templates.listItems.className),v.attachEvents.form(a),v.attachEvents.input(a),v.attachEvents.cancel(a)})}}(jQuery);